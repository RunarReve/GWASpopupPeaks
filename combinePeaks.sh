#!/bin/sh
#Loops through all GWASs that was made with HPOscase/HPOsiblingcontrol



#rm -f combined
for each in $(wc -l output/sib/* | awk '{if($1 > 1){print $2}}' )
do
   continue
   echo "${each}"
   string=$(echo "${each}" | sed -e 's/\// /g' | awk '{print $NF}')
   same="x"
   diff="x"

   #Get all peaks
   for i in $(grep parent_peak ${each}| awk '{print $4}');do
      string="${string},${i}"
   done
   for i in $(grep samePeak ${each} | awk '{print $1","$4}'); do
      same="${same}_${i}"
   done
   for i in $(grep newPeak  ${each} | awk '{print $1","$4}'); do
      diff="${diff}_${i}"
   done
   #Remove default value if anything else is added 
   same=$(echo "${same}" |sed -e 's/x_//g')
   diff=$(echo "${diff}" |sed -e 's/x_//g')

   string="${string}	${same}	${diff}"
   
   echo "${string}" >> combined
done


#Get list of new peaks lists
cat combined | awk '{if($3 != "x"){print substr ($0, 0,7)}}' > newPeakList
#cat combined | awk '{if($3 != "x"){print $0}}'


